# RATS: Test Go bridge â€” misc packages (1:1 mapping)
use "test"
use "str"
use "conv"

import "sort"
import "time"
import "os" as go_os

# sort (1:1 functions only)
rats "sort.strings_are_sorted"
  test.assert_true(sort.strings_are_sorted(["apple", "banana", "cherry"]))
  test.assert_false(sort.strings_are_sorted(["cherry", "apple"]))
end

# time (1:1 functions only)
rats "time.parse_duration"
  ns = time.parse_duration("1s")
  test.assert_eq(ns, 1000000000)
end

# os (Go bridge with alias)
rats "os bridge getenv with alias"
  home = go_os.getenv("HOME")
  test.assert_neq(home, "")
end

rats "os bridge getwd"
  cwd = go_os.getwd()
  test.assert_neq(cwd, "")
end

rats "os bridge hostname"
  h = go_os.hostname()
  test.assert_neq(h, "")
end

rats "os bridge temp_dir"
  d = go_os.temp_dir()
  test.assert_neq(d, "")
  test.assert_true(len(d) > 0)
end

rats "os bridge read_file"
  content = go_os.read_file("/etc/hosts")
  test.assert_neq(content, "")
end

rats "os bridge write_file"
  path = test.tmpdir() + "/rugo_test_write_file.txt"
  go_os.write_file(path, "hello from rugo", 0644)
  content = go_os.read_file(path)
  test.assert_eq(str.trim(content), "hello from rugo")
  go_os.remove(path)
end

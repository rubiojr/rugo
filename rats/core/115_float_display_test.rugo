# RATS: Float values should always display with a decimal point
# Bug: beda5f0 â€” floats lose trailing zero, indistinguishable from integers
use "test"
use "eval"

rats "puts 3.0 shows 3.0"
  source = <<~RUGO
    puts 3.0
  RUGO
  result = eval.run(source)
  test.assert_eq(result["status"], 0)
  test.assert_eq(result["lines"][0], "3.0")
end

rats "puts 0.0 shows 0.0"
  source = <<~RUGO
    puts 0.0
  RUGO
  result = eval.run(source)
  test.assert_eq(result["status"], 0)
  test.assert_eq(result["lines"][0], "0.0")
end

rats "puts 1.0 + 2.0 shows 3.0"
  source = <<~RUGO
    puts 1.0 + 2.0
  RUGO
  result = eval.run(source)
  test.assert_eq(result["status"], 0)
  test.assert_eq(result["lines"][0], "3.0")
end

rats "puts 3.14 still shows 3.14"
  source = <<~RUGO
    puts 3.14
  RUGO
  result = eval.run(source)
  test.assert_eq(result["status"], 0)
  test.assert_eq(result["lines"][0], "3.14")
end

rats "float variable shows decimal"
  source = <<~RUGO
    x = 5.0
    puts x
  RUGO
  result = eval.run(source)
  test.assert_eq(result["status"], 0)
  test.assert_eq(result["lines"][0], "5.0")
end

rats "negative float shows decimal"
  source = <<~RUGO
    x = -1.0
    puts x
  RUGO
  result = eval.run(source)
  test.assert_eq(result["status"], 0)
  test.assert_eq(result["lines"][0], "-1.0")
end

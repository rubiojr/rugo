# RATS: Test Go bridge â€” slices package
use "test"

import "slices"

rats "slices.contains with strings"
  test.assert_true(slices.contains(["apple", "banana", "cherry"], "banana"))
  test.assert_false(slices.contains(["apple", "banana", "cherry"], "xyz"))
end

rats "slices.contains with ints"
  test.assert_true(slices.contains([1, 2, 3, 4, 5], 3))
  test.assert_false(slices.contains([1, 2, 3, 4, 5], 99))
end

rats "slices.index"
  test.assert_eq(slices.index(["apple", "banana", "cherry"], "cherry"), 2)
  test.assert_eq(slices.index(["apple", "banana", "cherry"], "nope"), -1)
end

rats "slices.reverse"
  reversed = slices.reverse([1, 2, 3])
  test.assert_eq(reversed[0], 3)
  test.assert_eq(reversed[1], 2)
  test.assert_eq(reversed[2], 1)
end

rats "slices.reverse does not modify original"
  original = [1, 2, 3]
  reversed = slices.reverse(original)
  test.assert_eq(original[0], 1)
  test.assert_eq(reversed[0], 3)
end

rats "slices.compact"
  compacted = slices.compact([1, 1, 2, 2, 3, 1, 1])
  test.assert_eq(len(compacted), 4)
  test.assert_eq(compacted[0], 1)
  test.assert_eq(compacted[1], 2)
  test.assert_eq(compacted[2], 3)
  test.assert_eq(compacted[3], 1)
end

rats "slices.compact strings"
  test.assert_eq(len(slices.compact(["a", "a", "b", "c", "c"])), 3)
end

rats "slices.reverse empty array"
  test.assert_eq(len(slices.reverse([])), 0)
end

rats "slices.contains empty array"
  test.assert_false(slices.contains([], "anything"))
end

rats "slices.index empty array"
  test.assert_eq(slices.index([], "nope"), -1)
end

rats "slices.compact single element"
  result = slices.compact(["only"])
  test.assert_eq(len(result), 1)
  test.assert_eq(result[0], "only")
end

rats "slices.compact empty array"
  test.assert_eq(len(slices.compact([])), 0)
end

rats "slices.reverse single element"
  test.assert_eq(slices.reverse(["one"])[0], "one")
end

use "test"
use "rand"
use "str"

rats "rand.int"
  r = rand.int(1, 100)
  test.assert_true(r >= 1)
  test.assert_true(r < 100)
end

rats "rand.float"
  r = rand.float()
  test.assert_true(r >= 0.0)
  test.assert_true(r < 1.0)
end

rats "rand.string"
  s = rand.string(16)
  test.assert_eq(len(s), 16)
  s2 = rand.string(0)
  test.assert_eq(s2, "")
end

rats "rand.choice"
  arr = [10, 20, 30]
  c = rand.choice(arr)
  test.assert_true(c == 10 || c == 20 || c == 30)
end

rats "rand.shuffle"
  arr = [1, 2, 3, 4, 5]
  shuffled = rand.shuffle(arr)
  test.assert_eq(len(shuffled), 5)
  # original unchanged
  test.assert_eq(arr[0], 1)
end

rats "rand.uuid"
  u = rand.uuid()
  test.assert_eq(len(u), 36)
  test.assert_true(str.contains(u, "-"))
  parts = str.split(u, "-")
  test.assert_eq(len(parts), 5)
end

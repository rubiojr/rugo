# RATS: Test Go bridge â€” strings package
use "test"

import "strings"

rats "strings.contains"
  test.assert_true(strings.contains("hello world", "world"))
  test.assert_false(strings.contains("hello world", "xyz"))
end

rats "strings.to_upper and to_lower"
  test.assert_eq(strings.to_upper("hello"), "HELLO")
  test.assert_eq(strings.to_lower("WORLD"), "world")
end

rats "strings.split and join"
  test.assert_eq(len(strings.split("a,b,c", ",")), 3)
  test.assert_eq(strings.join(["x", "y", "z"], "-"), "x-y-z")
end

rats "strings.has_prefix and has_suffix"
  test.assert_true(strings.has_prefix("hello", "hel"))
  test.assert_true(strings.has_suffix("hello", "llo"))
  test.assert_false(strings.has_prefix("hello", "xyz"))
end

rats "strings.replace_all"
  test.assert_eq(strings.replace_all("hello world", "o", "0"), "hell0 w0rld")
end

rats "strings.trim_space"
  test.assert_eq(strings.trim_space("  hello  "), "hello")
end

rats "strings.repeat"
  test.assert_eq(strings.repeat("ab", 3), "ababab")
end

rats "strings.count"
  test.assert_eq(strings.count("hello", "l"), 2)
end

rats "strings.index"
  test.assert_eq(strings.index("hello", "ll"), 2)
  test.assert_eq(strings.index("hello", "xyz"), -1)
end

rats "strings.fields"
  test.assert_eq(len(strings.fields("  hello   world  ")), 2)
end

rats "strings.trim_prefix and trim_suffix"
  test.assert_eq(strings.trim_prefix("hello_world", "hello_"), "world")
  test.assert_eq(strings.trim_suffix("hello_world", "_world"), "hello")
end

rats "strings.equal_fold"
  test.assert_true(strings.equal_fold("Hello", "hello"))
end

rats "strings.split_n"
  test.assert_eq(len(strings.split_n("a,b,c,d", ",", 2)), 2)
end

rats "strings.cut_prefix"
  test.assert_eq(strings.cut_prefix("Hello, World", "Hello, "), "World")
  test.assert_nil(strings.cut_prefix("Hello", "Xyz"))
end

rats "strings.replace with count limit"
  test.assert_eq(strings.replace("aaa", "a", "b", 2), "bba")
end

rats "strings.trim with cutset"
  test.assert_eq(strings.trim("!!!hello!!!", "!"), "hello")
end

rats "strings.trim_left and trim_right"
  test.assert_eq(strings.trim_left("xxhello", "x"), "hello")
  test.assert_eq(strings.trim_right("helloxx", "x"), "hello")
end

rats "strings.contains_any"
  test.assert_true(strings.contains_any("hello", "aeiou"))
  test.assert_false(strings.contains_any("xyz", "aeiou"))
end

rats "strings.last_index"
  test.assert_eq(strings.last_index("go gopher go", "go"), 10)
end

rats "strings.split_after"
  parts = strings.split_after("a,b,c", ",")
  test.assert_eq(parts[0], "a,")
  test.assert_eq(parts[1], "b,")
  test.assert_eq(len(parts), 3)
end

rats "strings.clone"
  test.assert_eq(strings.clone("hello"), "hello")
end

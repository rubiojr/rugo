# RATS: Test arrays and hashes
use "test"

rats "array creation and access"
  arr = [1, 2, 3]
  test.assert_eq(arr[0], 1)
  test.assert_eq(arr[2], 3)
  test.assert_eq(len(arr), 3)
end

rats "array append"
  arr = [1, 2]
  arr = append(arr, 3)
  test.assert_eq(len(arr), 3)
  test.assert_eq(arr[2], 3)
end

rats "hash creation and access"
  h = {"a" => 1, "b" => 2}
  test.assert_eq(h["a"], 1)
  test.assert_eq(h["b"], 2)
end

rats "arrays and hashes example"
  result = test.run("rugo run examples/arrays_hashes.rugo")
  test.assert_eq(result["status"], 0)
end

rats "array slice basic"
  result = test.run("rugo run rats/fixtures/slice_basic.rugo")
  test.assert_eq(result["status"], 0)
  lines = result["lines"]
  test.assert_eq(lines[0], "3")
  test.assert_eq(lines[1], "1")
  test.assert_eq(lines[2], "3")
  test.assert_eq(lines[3], "4")
  test.assert_eq(lines[4], "4")
  test.assert_eq(lines[5], "2")
  test.assert_eq(lines[6], "0")
end
